{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}Plugins{% endblock %}
{% block head %}
    <script>
        $(document).ready(function(){
            var $disabled_select = $('select#select_disabled').children('option');
            var $enabled_select = $('select#select_enabled').children('option');

            var $enable_button = $('input#enable');
            var $disable_button = $('input#disable');

            if ($disabled_select.html() == 'All plugins enabled'){
                $($disabled_select.parent()).attr('disabled', true);
                $($enable_button).attr('disabled', true);
            }

            else if ($enabled_select.html() == 'No active plugins'){
                $($enabled_select.parent()).attr('disabled', true);
                $($disable_button).attr('disabled', true);
            }

        });

        $(function() {
			  $('input#enable').on('click', function() {
				$.getJSON('/_enable_plugin', {
				  enableplugins: $('select[id="select_disabled"]').val()
				}, function(data) {
				});
				return false;
			  });
			});

        $(function() {
			  $('input#disable').on('click', function() {
				$.getJSON('/_disable_plugin', {
				  disableplugins: $('select[id="select_enabled"]').val()
				}, function(data) {
				});
				return false;
			  });
			});

    </script>
{% endblock %}
{% block page_content %}
    <div class="page-header">
        <h1>Available plugins</h1>
    </div>
    <div class="container ">
        <div class="form-group col-md-6 col-sm-5 col-lg-6">
            {{ form.hidden_tag() }}
            {{ form.select_disabled.label(class='col-form-label') }}
            {{ form.select_disabled(class='form-control')}}
            {{ form.select_enabled.label(class='col-form-label') }}
            {{ form.select_enabled(class='form-control') }}
        </div>
    </div>
    <div class="container form-group col-md-6 col-sm-5 col-lg-6">
        <input type="submit" class="btn btn-default" value="Enable" id="enable">
        <input type="submit" class="btn btn-default" value="Disable" id="disable">
    </div>




{% endblock %}