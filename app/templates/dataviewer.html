{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}Data Viewer{% endblock %}

{% block head %}

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/cr-1.3.2/se-1.2.0/datatables.min.css"/>

    <script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-2.2.3/dt-1.10.12/cr-1.3.2/se-1.2.0/datatables.min.js"></script>

    <script>
        $(document).ready(function(){
            var tabledata = {{ data|safe }};
            var column_names = {{ titles|safe }};
            var table = $('#dataview').DataTable({
                data: tabledata,
                columns: column_names,
                dom: "<'row'<'col-sm-6'l><'col-sm-6'f>>" +
                    "<'row'<'col-sm-12'tr>>" +
                    "<'row'<'col-sm-5'i><'col-sm-7 'p>>",
                pagingType: 'simple'

            });
            table.on('select', function(e, dt, type, indexes){
                var data1 = table.rows( indexes ).data().pluck( 'id' );
                console.log(data1)
            })
        });

            </script>
{% endblock %}

{% block page_content %}

    <h1>Data Viewer</h1>
    <div class="container col-sm-6 col-md-6 col-lg-6">
        {{ wtf.quick_form(form) }}
    </div>


    {% if titles != None %}
        <div class="container col-sm-12 col-md-12 col-lg-12">
            <hr>
            <table class="table table-striped table-bordered" id="dataview">

            </table>


        </div>
    {% endif %}
{% endblock %}